#
# Mar Electronica ME2401-USBJTAG
#
# https://github.com/mar-electronica/ME2401-USBJTAG
#
# OpenOCD config file for SWD
#

# Adapter Configuration : FTDI
adapter driver ftdi

# VID/PID
ftdi vid_pid 0x0403 0x6010

# Device Description
ftdi device_desc "ME2401-USBJTAG01"

# Device Channel
ftdi channel 0

# Initial values of the FTDI GPIO data and direction registers.
#
#  Bit | Pin    | Function  | data(0x04d0)   | direction(0x04f3)
# -----+--------+-----------+----------------+------------------
#    0 | ADBUS0 | SWCLK     | 0 (Low)        | 1 (OUTPUT)
#    1 | ADBUS1 | SWDIO_OUT | 0 (Low)        | 1 (OUTPUT)
#    2 | ADBUS2 | SWDIO     | 0 (Don't Care) | 0 (INPUT)
#    3 | ADBUS3 | NC        | 0 (Don't Care) | 0 (INPUT)
#    4 | ADBUS4 | SWDIO_DIR | 1 (High)       | 1 (OUTPUT)
#    5 | ADBUS5 | RESET     | 0 (Low)        | 1 (OUTPUT)
#    6 | ADBUS6 | OE1       | 1 (High)       | 1 (OUTPUT)
#    7 | ADBUS7 | OE2       | 1 (High)       | 1 (OUTPUT)
#    8 | ACBUS0 | NC        | 0 (Don't Care) | 0 (INPUT)
#    9 | ACBUS1 | RESET_IN  | 0 (Don't Care) | 0 (INPUT)
#   10 | ACBUS2 | LED1      | 1 (High)       | 1 (OUTPUT)
#   11 | ACBUS3 | NC        | 0 (Don't Care) | 0 (INPUT)
#   12 | ACBUS4 | NC        | 0 (Don't Care) | 0 (INPUT)
#   13 | ACBUS5 | NC        | 0 (Don't Care) | 0 (INPUT)
#   14 | ACBUS6 | NC        | 0 (Don't Care) | 0 (INPUT)
#   15 | ACBUS7 | NC        | 0 (Don't Care) | 0 (INPUT)
ftdi layout_init 0x04d0 0x04f3

# RESET Signal (open-collector transistor)
#
#  Bit | Pin    | Function
# -----+--------+----------
#    5 | ADBUS5 | RESET
ftdi layout_signal nSRST -oe 0x0020

# LED
#
#  Bit | Pin    | Function
# -----+--------+----------
#   10 | ACBUS2 | LED1
ftdi layout_signal LED -data 0x0400

# SWD_EN Signal (virtual signal)
ftdi layout_signal SWD_EN -data 0x0000

# SWDIO_OE Signal (three state buffer control)
#
#  Bit | Pin    | Function  | data(0x04c0)   | direction(0x04e3)
# -----+--------+-----------+----------------+------------------
#    4 | ADBUS4 | SWDIO_DIR | 0 (Don't Care) | 0 (INPUT)
ftdi layout_signal SWDIO_OE -ndata 0x0010

# [EOF]
